<template>
  <article class="product-card" role="listitem" tabindex="0" aria-label={ariaLabel}>
    <c-product-image record-id={product.id}></c-product-image>
    <template if:true={isFetchedFromOrg}>
      <div class="org-star" title="Price from Org" aria-hidden="false">
        <svg viewBox="0 0 24 24" class="org-star-icon" focusable="false" aria-hidden="true">
          <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
        </svg>
      </div>  
    </template>
      <div class="product-meta">
        <h3 class="product-title" title={product.name}>{product.name}</h3>
        <p class="product-family">{product.family}</p>
        <p class="sku"><strong>SKU:</strong> {product.sku}</p>
      </div>
    <!-- Description section removed as requested -->
    <div class="price-row">
      <template if:true={hasPrice}>
        <span class="price" title="Unit Price">{formattedPrice}</span>
      </template>
      <template if:false={hasPrice}>
        <span class="price price--loading" title="Fetching price...">Price Unavailable</span>
      </template>
    </div>
    <div class="quantity-control">
        <button class="quantity-btn" aria-label="Decrease quantity" onclick={decreaseQuantity}>-</button>
        <span class="quantity-display" aria-live="polite">{quantity}</span>
        <button class="quantity-btn" aria-label="Increase quantity" onclick={increaseQuantity}>+</button>
      </div>
    <div class="action-block">
      <lightning-button 
        label="Add to Cart"
        title="Add to Cart"
        onclick={handleAdd}
      ></lightning-button>
      <lightning-button 
        label="View Details"
        title="View Details"
        onclick={handleRemove}
      ></lightning-button>
    </div>
  </article>
  
  <!-- Modal for product details -->
  <template if:true={showModal}>
    <c-product-detail-modal 
      product={product}
      onclosemodal={handleCloseModal}>
    </c-product-detail-modal>
  </template>
</template>
